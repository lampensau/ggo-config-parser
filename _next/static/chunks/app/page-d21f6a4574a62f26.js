(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1366:(e,r,a)=>{Promise.resolve().then(a.bind(a,2223))},2223:(e,r,a)=>{"use strict";a.d(r,{default:()=>B});var t=a(5155),s=a(2115),n=a(7113);let l={258:"BPX Beltpack",259:"BPXSP Sports Beltpack",322:"WBPXSP Sports Beltpack",325:"WBPRVCBRS Beltpack",326:"WBPRVCBRSSP Beltpack",384:"Wallpanels Group",385:"WPSP Wallpanel",386:"WPHS Wallpanel",387:"WPNA Wallpanel",388:"WPX Wallpanel",513:"MCD08 Desk Station",514:"MCR12 Desk Station",515:"MCD16 Desk Station",516:"MCD24 Desk Station",517:"MCD32 Desk Station",518:"MCX Rack Station",519:"MCXEXT Rack Channel Extension",520:"MCXD Desk Station",521:"MCXDEXT Desk Channel Extension",769:"4W Interface",770:"2W Interface",771:"BRIDGE Interface",772:"INTERFACEX (LCD)",773:"INTERFACEX (TFT)",774:"BRIDGEX Interface (LCD)",775:"BRIDGEX Interface (TFT)",776:"Q4WR Interface",777:"DANTE Interface",897:"BCN Beacon",898:"WAA Antenna",899:"SIRDX Interface",900:"SI4WR Interface",901:"SI2WR Interface",902:"SIBR8RV Interface"},i=e=>l[e]||"Unknown Device Type",d=e=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{let[r,a]=e;return{id:r,name:a.Name,color:a.Color,devices:[]}}),o=e=>{let r={};return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).forEach(e=>{let[a,t]=e;t.UserId&&1===t.UserId.Type&&(r[a.slice(-6)]=t.UserId.Id.toString())}),r},c=(e,r)=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{let[a,t]=e,s=a.split("-").slice(-3).join("").toUpperCase();return{name:t.Name,deviceType:t.deviceType,typeName:i(t.deviceType),serialNumber:t.serialNumber,firmware:t.firmwareName,ipAddress:t.IpAddress,macAddress:t.macAddress,linkedToUser:r[s]||null}});var m=a(6535),u=a(7987),f=a(8482),h=a(4352),p=a(6694),g=a(7644),x=a(1567);let b=g.Kq,v=g.bL,k=g.l9,j=s.forwardRef((e,r)=>{let{className:a,sideOffset:s=4,...n}=e;return(0,t.jsx)(g.UC,{ref:r,sideOffset:s,className:(0,x.cn)("z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-xs text-gray-50 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});j.displayName=g.UC.displayName;var N=a(5565);let y=()=>"/ggo-config-parser",C=e=>{let{parsedData:r,onExport:a,onReset:s,theme:n,onThemeChange:l,mounted:i}=e,d=()=>i?"dark"===n?"Switch to light mode":"light"===n?"Switch to system theme":"Switch to dark mode":"Loading theme...";return(0,t.jsx)("div",{className:"sticky top-0 z-10 bg-emerald-600 dark:bg-emerald-800 shadow-md",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(N.default,{src:"".concat(y(),"/logo-plain.svg"),alt:"Green-GO Logo",width:32,height:32,className:"mr-2 brightness-0 invert"}),(0,t.jsx)("h1",{className:"text-white text-xl font-semibold",children:"Green-GO Config Parser"})]}),(0,t.jsx)(b,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",role:"toolbar","aria-label":"Main controls",children:[r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(v,{children:[(0,t.jsx)(k,{asChild:!0,children:(0,t.jsx)("button",{className:"p-2 bg-white dark:bg-gray-200 text-emerald-700 rounded-md hover:bg-emerald-50 dark:hover:bg-gray-300 transition-colors duration-200",onClick:a,"aria-label":"Export to CSV",children:(0,t.jsx)(h.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,t.jsx)(j,{children:"Export to CSV"})]}),(0,t.jsxs)(v,{children:[(0,t.jsx)(k,{asChild:!0,children:(0,t.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:s,"aria-label":"Parse another file",children:(0,t.jsx)(p.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,t.jsx)(j,{children:"Parse another file"})]})]}),(0,t.jsxs)(v,{children:[(0,t.jsx)(k,{asChild:!0,children:(0,t.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:l,"aria-label":d(),title:d(),children:i?"dark"===n?(0,t.jsx)(m.A,{className:"w-5 h-5"}):"light"===n?(0,t.jsx)(u.A,{className:"w-5 h-5"}):(0,t.jsx)(f.A,{className:"w-5 h-5"}):null})}),(0,t.jsx)(j,{children:d()})]})]})})]})})};var D=a(5942),w=a(9749);let S=e=>{let{isDragging:r,error:a,onDrop:s,onDragOver:n,onDragLeave:l,isLoading:i=!1}=e;return(0,t.jsx)(w.Zp,{className:"border-2 border-dashed",children:(0,t.jsx)(w.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"rounded-lg p-8 text-center cursor-pointer transition-colors duration-200\n            ".concat(i?"opacity-50 pointer-events-none":"","\n            ").concat(r?"bg-emerald-50 dark:bg-emerald-950/50 border-emerald-500":"bg-white dark:bg-gray-800 hover:bg-emerald-50 dark:hover:bg-emerald-950/30","\n            ").concat(a?"border-red-500 bg-red-50 dark:bg-red-950/50":""),onDrop:s,onDragOver:n,onDragLeave:l,onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},role:"button",tabIndex:0,"aria-label":"Drop zone for configuration file",onKeyPress:e=>{if("Enter"===e.key||" "===e.key){var r;null===(r=document.getElementById("file-input"))||void 0===r||r.click()}},children:[i?(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent mx-auto"}):(0,t.jsx)("input",{type:"file",id:"file-input",className:"sr-only",accept:".gg5",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){let e=new DataTransfer;e.items.add(a),s({preventDefault:()=>{},dataTransfer:{files:e.files}})}},"aria-label":"Upload configuration file"}),(0,t.jsx)(D.A,{className:"w-16 h-16 mx-auto mb-4 text-emerald-600 dark:text-emerald-400","aria-hidden":"true"}),(0,t.jsx)("p",{className:"text-lg mb-2 font-medium text-gray-700 dark:text-gray-200",children:"Drag and drop your configuration file here"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(Only supports Green-GO ",(0,t.jsx)("code",{children:".gg5"})," configuration files)"]}),a&&(0,t.jsx)("p",{className:"text-red-500 dark:text-red-400 mt-4",role:"alert",children:a})]})})})};var I=a(7711);class E extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){if(this.state.hasError){var e;return(0,t.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900 text-red-900 dark:text-red-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),(0,t.jsx)("p",{className:"text-sm",children:null===(e=this.state.error)||void 0===e?void 0:e.message})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let A=(0,I.default)(()=>a.e(681).then(a.bind(a,6681)).then(e=>e.ConfigDetails),{loadableGenerated:{webpack:()=>[6681]}}),R=(0,I.default)(()=>a.e(247).then(a.bind(a,5247)).then(e=>e.UserDevices),{loadableGenerated:{webpack:()=>[5247]}}),T=(0,I.default)(()=>a.e(139).then(a.bind(a,139)).then(e=>e.UnassignedDevices),{loadableGenerated:{webpack:()=>[139]}}),B=()=>{let[e,r]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),[i,m]=(0,s.useState)(!1),[u,f]=(0,s.useState)(null),{theme:h,setTheme:p}=(0,n.D)(),[g,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),k=(0,s.useCallback)(e=>{e.preventDefault(),m(!1),l(null),v(!0);let a=e.dataTransfer.files[0];if(!a){v(!1);return}if(!a.name.endsWith(".gg5")){l("Please upload a Green-GO .gg5 configuration file"),v(!1);return}f(a.name);let t=new FileReader;t.onload=e=>{try{var a;let t=function(e){try{let r=JSON.parse(e),a=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",",""),t={"Configuration Name":r.name,"Configuration ID":r.id.substring(0,8),"Multicast Address":r.multicastAddress,"Config Timestamp":a(r.timestamp),"Binary Timestamp":a(r.binaryTimestamp),"Unassigned Devices":0},s=d(r.users),n=o(r.devices),l=c(r.devices,n);return t["Unassigned Devices"]=l.filter(e=>null===e.linkedToUser).length,{configInfo:t,users:s,devices:l}}catch(e){if(e instanceof Error)throw Error("Failed to parse config file: ".concat(e.message));throw Error("Failed to parse config file")}}(null===(a=e.target)||void 0===a?void 0:a.result);r(t)}catch(e){l(e instanceof Error?e.message:"Failed to parse file")}finally{v(!1)}},t.readAsText(a)},[]),j=(0,s.useCallback)(e=>{e.preventDefault(),m(!0)},[]),N=(0,s.useCallback)(e=>{e.preventDefault(),m(!1)},[]),y=(0,s.useCallback)(()=>{if(!e)return;let r=u?u.replace(/\.(gg5|json)$/,".csv"):"config_export.csv",a=new Blob([["User Name,User ID,Device Name,Device Type,Serial Number,Firmware,IP Address,MAC Address",...e.users.flatMap(r=>{let a=e.devices.filter(e=>e.linkedToUser===r.id);return a.length>0?a.map(e=>[r.name,r.id,e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(",")):[[r.name,r.id,"","","","","",""].map(e=>'"'.concat(e||"",'"')).join(",")]}),...e.devices.filter(e=>null===e.linkedToUser).map(e=>["","",e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(a);t.setAttribute("href",s),t.setAttribute("download",r),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},[e,u]);return(0,s.useEffect)(()=>{x(!0)},[]),(0,t.jsxs)("div",{className:"min-h-full",role:"main",children:[(0,t.jsx)(C,{parsedData:e,onExport:y,onReset:()=>{r(null),l(null)},theme:h,onThemeChange:()=>{"dark"===h?p("light"):"light"===h?p("system"):p("dark")},mounted:g}),(0,t.jsx)(E,{children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(A,{configInfo:e.configInfo}),e.users.map(r=>(0,t.jsx)(R,{user:r,devices:e.devices},r.id)),(0,t.jsx)(T,{devices:e.devices})]}):(0,t.jsx)(S,{isDragging:i,error:a,onDrop:k,onDragOver:j,onDragLeave:N,isLoading:b})})})]})}},9749:(e,r,a)=>{"use strict";a.d(r,{Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>i});var t=a(5155),s=a(2115),n=a(1567);let l=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent"},1567:(e,r,a)=>{"use strict";a.d(r,{cn:()=>n});var t=a(3463),s=a(9795);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,t.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[102,441,517,358],()=>r(1366)),_N_E=e.O()}]);