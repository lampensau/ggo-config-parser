(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1366:(e,r,t)=>{Promise.resolve().then(t.bind(t,2223))},2223:(e,r,t)=>{"use strict";t.d(r,{default:()=>B});var a=t(5155),n=t(2115),i=t(7113);let s={258:"BPX Beltpack",259:"BPXSP Sports Beltpack",322:"WBPXSP Sports Beltpack",325:"WBPRVCBRS Beltpack",326:"WBPRVCBRSSP Beltpack",384:"Wallpanels Group",385:"WPSP Wallpanel",386:"WPHS Wallpanel",387:"WPNA Wallpanel",388:"WPX Wallpanel",513:"MCD08 Desk Station",514:"MCR12 Desk Station",515:"MCD16 Desk Station",516:"MCD24 Desk Station",517:"MCD32 Desk Station",518:"MCX Rack Station",519:"MCXEXT Rack Channel Extension",520:"MCXD Desk Station",521:"MCXDEXT Desk Channel Extension",769:"4W Interface",770:"2W Interface",771:"BRIDGE Interface",772:"INTERFACEX (LCD)",773:"INTERFACEX (TFT)",774:"BRIDGEX Interface (LCD)",775:"BRIDGEX Interface (TFT)",776:"Q4WR Interface",777:"DANTE Interface",897:"BCN Beacon",898:"WAA Antenna",899:"SIRDX Interface",900:"SI4WR Interface",901:"SI2WR Interface",902:"SIBR8RV Interface"},l=e=>s[e]||"Unknown Device Type",d=e=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{let[r,t]=e;return{id:r,name:t.Name,color:t.Color,devices:[]}}),o=e=>{let r={};return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).forEach(e=>{let[t,a]=e;a.UserId&&1===a.UserId.Type&&(r[t.slice(-6)]=a.UserId.Id.toString())}),r},c=(e,r)=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{let[t,a]=e,n=t.split("-").slice(-3).join("").toUpperCase();return{name:a.Name,deviceType:a.deviceType,typeName:l(a.deviceType),serialNumber:a.serialNumber,firmware:a.firmwareName,ipAddress:a.IpAddress,macAddress:a.macAddress,linkedToUser:r[n]||null}});var m=t(6535),u=t(7987),g=t(8482),f=t(4352),h=t(6694),p=t(7644),v=t(1567);let x=p.Kq,b=p.bL,k=p.l9,N=n.forwardRef((e,r)=>{let{className:t,sideOffset:n=4,...i}=e;return(0,a.jsx)(p.UC,{ref:r,sideOffset:n,className:(0,v.cn)("z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-xs text-gray-50 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});N.displayName=p.UC.displayName;var y=t(5565);let j=()=>"/ggo-config-parser",C=e=>{let{parsedData:r,onExport:t,onReset:n,theme:i,onThemeChange:s,mounted:l}=e,d=()=>l?"dark"===i?"Switch to light mode":"light"===i?"Switch to system theme":"Switch to dark mode":"Loading theme...";return(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-emerald-600 dark:bg-emerald-800 shadow-md",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.default,{src:"".concat(j(),"/logo-plain.svg"),alt:"Green-GO Logo",width:32,height:32,className:"mr-2 brightness-0 invert"}),(0,a.jsx)("h1",{className:"text-white text-xl font-semibold",children:"Green-GO Config Parser"})]}),(0,a.jsx)(x,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",role:"toolbar","aria-label":"Main controls",children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b,{children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-white dark:bg-gray-200 text-emerald-700 rounded-md hover:bg-emerald-50 dark:hover:bg-gray-300 transition-colors duration-200",onClick:t,"aria-label":"Export to CSV",children:(0,a.jsx)(f.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,a.jsx)(N,{children:"Export to CSV"})]}),(0,a.jsxs)(b,{children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:n,"aria-label":"Parse another file",children:(0,a.jsx)(h.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,a.jsx)(N,{children:"Parse another file"})]})]}),(0,a.jsxs)(b,{children:[(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:s,"aria-label":d(),title:d(),children:l?"dark"===i?(0,a.jsx)(m.A,{className:"w-5 h-5"}):"light"===i?(0,a.jsx)(u.A,{className:"w-5 h-5"}):(0,a.jsx)(g.A,{className:"w-5 h-5"}):null})}),(0,a.jsx)(N,{children:d()})]})]})})]})})};var S=t(5942),w=t(9749);let D=e=>{let{isDragging:r,error:t,onDrop:n,onDragOver:i,onDragLeave:s,isLoading:l=!1}=e;return(0,a.jsx)(w.Zp,{className:"border-2 border-dashed",children:(0,a.jsx)(w.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"rounded-lg p-8 text-center cursor-pointer transition-colors duration-200\n            ".concat(l?"opacity-50 pointer-events-none":"","\n            ").concat(r?"bg-emerald-50 dark:bg-emerald-950/50 border-emerald-500":"bg-white dark:bg-gray-800 hover:bg-emerald-50 dark:hover:bg-emerald-950/30","\n            ").concat(t?"border-red-500 bg-red-50 dark:bg-red-950/50":""),onDrop:n,onDragOver:i,onDragLeave:s,onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},role:"button",tabIndex:0,"aria-label":"Drop zone for configuration file",onKeyPress:e=>{if("Enter"===e.key||" "===e.key){var r;null===(r=document.getElementById("file-input"))||void 0===r||r.click()}},children:[l?(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent mx-auto"}):(0,a.jsx)("input",{type:"file",id:"file-input",className:"sr-only",accept:".gg5",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new DataTransfer;e.items.add(t),n({preventDefault:()=>{},dataTransfer:{files:e.files}})}},"aria-label":"Upload configuration file"}),(0,a.jsx)(S.A,{className:"w-16 h-16 mx-auto mb-4 text-emerald-600 dark:text-emerald-400","aria-hidden":"true"}),(0,a.jsx)("p",{className:"text-lg mb-2 font-medium text-gray-700 dark:text-gray-200",children:"Drag and drop your configuration file here"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(Only supports Green-GO ",(0,a.jsx)("code",{children:".gg5"})," configuration files)"]}),t&&(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400 mt-4",role:"alert",children:t})]})})})};var E=t(7711);class I extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e),console.error("Error info:",r)}render(){if(this.state.hasError){var e,r;return(0,a.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900 text-red-900 dark:text-red-50 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-sm",children:null===(e=this.state.error)||void 0===e?void 0:e.message}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:null===(r=this.state.error)||void 0===r?void 0:r.stack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let A=(0,E.default)(()=>t.e(681).then(t.bind(t,6681)).then(e=>e.ConfigDetails),{loadableGenerated:{webpack:()=>[6681]}}),T=(0,E.default)(()=>t.e(247).then(t.bind(t,5247)).then(e=>e.UserDevices),{loadableGenerated:{webpack:()=>[5247]}}),R=(0,E.default)(()=>t.e(139).then(t.bind(t,139)).then(e=>e.UnassignedDevices),{loadableGenerated:{webpack:()=>[139]}}),B=()=>{let[e,r]=(0,n.useState)(null),[t,s]=(0,n.useState)(null),[l,m]=(0,n.useState)(!1),[u,g]=(0,n.useState)(null),{theme:f,setTheme:h}=(0,i.D)(),[p,v]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),k=(0,n.useCallback)(e=>{e.preventDefault(),m(!1),s(null),b(!0);let t=e.dataTransfer.files[0];if(!t){b(!1);return}if(console.log("File being processed:",{name:t.name,size:t.size,type:t.type}),!t.name.endsWith(".gg5")){s("Please upload a Green-GO .gg5 configuration file"),b(!1);return}g(t.name);let a=new FileReader;a.onload=e=>{try{var t,a,n;console.log("File content length:",null===(a=e.target)||void 0===a?void 0:null===(t=a.result)||void 0===t?void 0:t.toString().length);let i=function(e){try{var r,t,a,n,i,s,l,m,u,g,f,h,p,v,x,b,k,N,y,j,C,S,w;let D=JSON.parse(e);if(console.log("Parsed data structure:",{name:null===(r=D.Settings)||void 0===r?void 0:r.Name,id:null===(t=D.Settings)||void 0===t?void 0:t.configId,multicastAddress:null===(a=D.Settings)||void 0===a?void 0:a.MulticastAddress,timestamp:null===(n=D.Settings)||void 0===n?void 0:n.savedAtTimestamp,binaryTimestamp:null===(i=D.Settings)||void 0===i?void 0:i.binaryTimestamp}),!(null===(s=D.Settings)||void 0===s?void 0:s.Name)||!(null===(l=D.Settings)||void 0===l?void 0:l.configId)||!(null===(m=D.Settings)||void 0===m?void 0:m.MulticastAddress)||!(null===(u=D.Settings)||void 0===u?void 0:u.savedAtTimestamp)||!(null===(g=D.Settings)||void 0===g?void 0:g.binaryTimestamp))throw console.error("Missing required fields in config data:",D),Error("Invalid configuration file structure");let E=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")}catch(r){return console.error("Error formatting date:",r),e}},I={"Configuration Name":null!==(b=null===(f=D.Settings)||void 0===f?void 0:f.Name)&&void 0!==b?b:"Unknown","Configuration ID":(null!==(k=null===(h=D.Settings)||void 0===h?void 0:h.configId)&&void 0!==k?k:"").substring(0,8),"Multicast Address":null!==(N=null===(p=D.Settings)||void 0===p?void 0:p.MulticastAddress)&&void 0!==N?N:"","Config Timestamp":E(null!==(y=null===(v=D.Settings)||void 0===v?void 0:v.savedAtTimestamp)&&void 0!==y?y:""),"Binary Timestamp":E(null!==(j=null===(x=D.Settings)||void 0===x?void 0:x.binaryTimestamp)&&void 0!==j?j:""),"Unassigned Devices":0},A=d(null!==(C=D.Users)&&void 0!==C?C:{}),T=o(null!==(S=D.Devices)&&void 0!==S?S:{}),R=c(null!==(w=D.Network)&&void 0!==w?w:{},T);return I["Unassigned Devices"]=R.filter(e=>null===e.linkedToUser).length,{configInfo:I,users:A,devices:R}}catch(r){if(console.error("Error parsing config file:",r),console.error("File content preview:",e.substring(0,200)+"..."),r instanceof Error)throw Error("Failed to parse config file: ".concat(r.message));throw Error("Failed to parse config file")}}(null===(n=e.target)||void 0===n?void 0:n.result);r(i)}catch(e){console.error("Error in file processing:",e),s(e instanceof Error?e.message:"Failed to parse file")}finally{b(!1)}},a.onerror=e=>{console.error("FileReader error:",e),s("Error reading file"),b(!1)},a.readAsText(t)},[]),N=(0,n.useCallback)(e=>{e.preventDefault(),m(!0)},[]),y=(0,n.useCallback)(e=>{e.preventDefault(),m(!1)},[]),j=(0,n.useCallback)(()=>{if(!e)return;let r=u?u.replace(/\.(gg5|json)$/,".csv"):"config_export.csv",t=new Blob([["User Name,User ID,Device Name,Device Type,Serial Number,Firmware,IP Address,MAC Address",...e.users.flatMap(r=>{let t=e.devices.filter(e=>e.linkedToUser===r.id);return t.length>0?t.map(e=>[r.name,r.id,e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(",")):[[r.name,r.id,"","","","","",""].map(e=>'"'.concat(e||"",'"')).join(",")]}),...e.devices.filter(e=>null===e.linkedToUser).map(e=>["","",e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),n=URL.createObjectURL(t);a.setAttribute("href",n),a.setAttribute("download",r),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},[e,u]);return(0,n.useEffect)(()=>{v(!0)},[]),(0,a.jsxs)("div",{className:"min-h-full",role:"main",children:[(0,a.jsx)(C,{parsedData:e,onExport:j,onReset:()=>{r(null),s(null)},theme:f,onThemeChange:()=>{"dark"===f?h("light"):"light"===f?h("system"):h("dark")},mounted:p}),(0,a.jsx)(I,{children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(A,{configInfo:e.configInfo}),e.users.map(r=>(0,a.jsx)(T,{user:r,devices:e.devices},r.id)),(0,a.jsx)(R,{devices:e.devices})]}):(0,a.jsx)(D,{isDragging:l,error:t,onDrop:k,onDragOver:N,onDragLeave:y,isLoading:x})})})]})}},9749:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>o,ZB:()=>d,Zp:()=>s,aR:()=>l});var a=t(5155),n=t(2115),i=t(1567);let s=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});s.displayName="Card";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});d.displayName="CardTitle";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...n})});o.displayName="CardContent"},1567:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var a=t(3463),n=t(9795);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[102,441,517,358],()=>r(1366)),_N_E=e.O()}]);
//# sourceMappingURL=page-5cfd018905ddea29.js.map