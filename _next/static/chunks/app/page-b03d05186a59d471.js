(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1366:(e,r,t)=>{Promise.resolve().then(t.bind(t,4929))},4929:(e,r,t)=>{"use strict";t.d(r,{default:()=>I});var a=t(5155),l=t(2115),n=t(7113),i=t(8966),s=t(6535),o=t(7987),d=t(8482),c=t(4352),m=t(6694),u=t(3601),p=t(5565);let g=()=>"/ggo-config-parser",f=e=>{let{parsedData:r,onExport:t,onReset:l,theme:n,onThemeChange:i,mounted:f}=e,v=()=>f?"dark"===n?"Switch to light mode":"light"===n?"Switch to system theme":"Switch to dark mode":"Loading theme...";return(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-emerald-600 dark:bg-emerald-800 shadow-md",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.default,{src:"".concat(g(),"/logo-plain.svg"),alt:"Green-GO Logo",width:32,height:32,className:"mr-2 brightness-0 invert"}),(0,a.jsx)("h1",{className:"text-white text-xl font-semibold",children:"Green-GO Config Parser"})]}),(0,a.jsx)(u.Bc,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",role:"toolbar","aria-label":"Main controls",children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.sb,{children:[(0,a.jsx)(u.k$,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-white dark:bg-gray-200 text-emerald-700 rounded-md hover:bg-emerald-50 dark:hover:bg-gray-300 transition-colors duration-200",onClick:t,"aria-label":"Export to CSV",children:(0,a.jsx)(c.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,a.jsx)(u.ZI,{children:"Export to CSV"})]}),(0,a.jsxs)(u.sb,{children:[(0,a.jsx)(u.k$,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:l,"aria-label":"Parse another file",children:(0,a.jsx)(m.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,a.jsx)(u.ZI,{children:"Parse another file"})]})]}),(0,a.jsxs)(u.sb,{children:[(0,a.jsx)(u.k$,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:i,"aria-label":v(),title:v(),children:f?"dark"===n?(0,a.jsx)(s.A,{className:"w-5 h-5"}):"light"===n?(0,a.jsx)(o.A,{className:"w-5 h-5"}):(0,a.jsx)(d.A,{className:"w-5 h-5"}):null})}),(0,a.jsx)(u.ZI,{children:v()})]})]})})]})})};var v=t(5942),h=t(9749);let b=e=>{let{isDragging:r,error:t,onDrop:l,onDragOver:n,onDragLeave:i,isLoading:s=!1}=e;return(0,a.jsx)(h.Zp,{className:"border-2 border-dashed",children:(0,a.jsx)(h.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"rounded-lg p-8 text-center cursor-pointer transition-colors duration-200\n            ".concat(s?"opacity-50 pointer-events-none":"","\n            ").concat(r?"bg-emerald-50 dark:bg-emerald-950/50 border-emerald-500":"bg-white dark:bg-gray-800 hover:bg-emerald-50 dark:hover:bg-emerald-950/30","\n            ").concat(t?"border-red-500 bg-red-50 dark:bg-red-950/50":""),onDrop:l,onDragOver:n,onDragLeave:i,onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},role:"button",tabIndex:0,"aria-label":"Drop zone for configuration file",onKeyPress:e=>{if("Enter"===e.key||" "===e.key){var r;null===(r=document.getElementById("file-input"))||void 0===r||r.click()}},children:[s?(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent mx-auto"}):(0,a.jsx)("input",{type:"file",id:"file-input",className:"sr-only",accept:".gg5",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new DataTransfer;e.items.add(t),l({preventDefault:()=>{},dataTransfer:{files:e.files}})}},"aria-label":"Upload configuration file"}),(0,a.jsx)(v.A,{className:"w-16 h-16 mx-auto mb-4 text-emerald-600 dark:text-emerald-400","aria-hidden":"true"}),(0,a.jsx)("p",{className:"text-lg mb-2 font-medium text-gray-700 dark:text-gray-200",children:"Drag and drop your configuration file here"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(Only supports Green-GO ",(0,a.jsx)("code",{children:".gg5"})," configuration files)"]}),t&&(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400 mt-4",role:"alert",children:t})]})})})};var x=t(7711);class N extends l.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e),console.error("Error info:",r)}render(){if(this.state.hasError){var e,r;return(0,a.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900 text-red-900 dark:text-red-50 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-sm",children:null===(e=this.state.error)||void 0===e?void 0:e.message}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:null===(r=this.state.error)||void 0===r?void 0:r.stack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let k=(0,x.default)(()=>t.e(681).then(t.bind(t,6681)).then(e=>e.ConfigDetails),{loadableGenerated:{webpack:()=>[6681]},ssr:!1}),y=(0,x.default)(()=>t.e(496).then(t.bind(t,496)).then(e=>e.default),{loadableGenerated:{webpack:()=>[496]},ssr:!1}),D=(0,x.default)(()=>t.e(139).then(t.bind(t,139)).then(e=>e.UnassignedDevices),{loadableGenerated:{webpack:()=>[139]},ssr:!1}),I=()=>{let[e,r]=(0,l.useState)(null),[t,s]=(0,l.useState)(null),[o,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(null),{theme:u,setTheme:p}=(0,n.D)(),[g,v]=(0,l.useState)(!1),[h,x]=(0,l.useState)(!1),I=(0,l.useCallback)(e=>{e.preventDefault(),d(!1),s(null),x(!0);let t=e.dataTransfer.files[0];if(!t){x(!1);return}if(console.log("File being processed:",{name:t.name,size:t.size,type:t.type}),!t.name.endsWith(".gg5")){s("Please upload a Green-GO .gg5 configuration file"),x(!1);return}m(t.name);let a=new FileReader;a.onload=e=>{try{var t,a,l;console.log("File content length:",null===(a=e.target)||void 0===a?void 0:null===(t=a.result)||void 0===t?void 0:t.toString().length);let n=(0,i.me)(null===(l=e.target)||void 0===l?void 0:l.result);r(n)}catch(e){console.error("Error in file processing:",e),s(e instanceof Error?e.message:"Failed to parse file")}finally{x(!1)}},a.onerror=e=>{console.error("FileReader error:",e),s("Error reading file"),x(!1)},a.readAsText(t)},[]),w=(0,l.useCallback)(e=>{e.preventDefault(),d(!0)},[]),j=(0,l.useCallback)(e=>{e.preventDefault(),d(!1)},[]),S=(0,l.useCallback)(()=>{if(!e)return;let r=c?c.replace(/\.(gg5|json)$/,".csv"):"config_export.csv",t=new Blob([["User Name,User ID,Device Name,Device Type,Serial Number,Firmware,IP Address,MAC Address",...e.users.flatMap(r=>{let t=e.devices.filter(e=>e.linkedToUser===r.id);return t.length>0?t.map(e=>[r.name,r.id,e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(",")):[[r.name,r.id,"","","","","",""].map(e=>'"'.concat(e||"",'"')).join(",")]}),...e.devices.filter(e=>null===e.linkedToUser).map(e=>["","",e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(t);a.setAttribute("href",l),a.setAttribute("download",r),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},[e,c]);return(0,l.useEffect)(()=>{v(!0)},[]),(0,a.jsxs)("div",{className:"min-h-full",role:"main",children:[(0,a.jsx)(f,{parsedData:e,onExport:S,onReset:()=>{r(null),s(null)},theme:u,onThemeChange:()=>{"dark"===u?p("light"):"light"===u?p("system"):p("dark")},mounted:g}),(0,a.jsx)(N,{children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(k,{configInfo:e.configInfo}),e.users.map(r=>(0,a.jsx)(y,{user:r,devices:e.devices},r.id)),(0,a.jsx)(D,{devices:e.devices})]}):(0,a.jsx)(b,{isDragging:o,error:t,onDrop:I,onDragOver:w,onDragLeave:j,isLoading:h})})})]})}},9749:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>s});var a=t(5155),l=t(2115),n=t(1567);let i=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});i.displayName="Card";let s=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...l})});s.displayName="CardHeader";let o=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});o.displayName="CardTitle";let d=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...l})});d.displayName="CardContent"},3601:(e,r,t)=>{"use strict";t.d(r,{Bc:()=>s,ZI:()=>c,k$:()=>d,sb:()=>o});var a=t(5155),l=t(2115),n=t(7644),i=t(1567);let s=n.Kq,o=n.bL,d=n.l9,c=l.forwardRef((e,r)=>{let{className:t,sideOffset:l=4,...s}=e;return(0,a.jsx)(n.UC,{ref:r,sideOffset:l,className:(0,i.cn)("z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-xs text-gray-50 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})});c.displayName=n.UC.displayName},3952:(e,r,t)=>{"use strict";t.d(r,{E6:()=>o,Jd:()=>s,RE:()=>i,UU:()=>c,Xr:()=>l,_Y:()=>n,eQ:()=>d,so:()=>a});let a="-",l={258:"BPX Belt Pack",259:"BPXSP Sports Belt Pack",321:"WBPX Wireless Belt Pack",322:"WBPXSP Wireless Sports Belt Pack",325:"WBPRVCBRS Wireless Belt Pack",326:"WBPRVCBRSSP Wireless Sports Belt Pack",384:"Wallpanels Group",385:"WPSP Wallpanel",386:"WPHS Wallpanel",387:"WPNA Wallpanel",388:"WPX Wallpanel",513:"MCD08 Desk Station",514:"MCR12 Desk Station",515:"MCD16 Desk Station",516:"MCD24 Desk Station",517:"MCD32 Desk Station",518:"MCX Rack Station",519:"MCXEXT Rack Channel Extension",520:"MCXD Desk Station",521:"MCXDEXT Desk Channel Extension",769:"4W Interface",770:"2W Interface",771:"BRIDGE Interface",772:"INTERFACEX (LCD)",773:"INTERFACEX (TFT)",774:"BRIDGEX Interface (LCD)",775:"BRIDGEX Interface (TFT)",776:"Q4WR Interface",777:"DANTE Interface",897:"BCN Beacon",898:"WAA Antenna",899:"SiRDX Interface",900:"Si4WR Interface",901:"Si2WR Interface",902:"SiBR8RV Interface",903:"STRIDE Antenna"},n={0:"Disabled",1:"Momentary",2:"Latch",3:"Latch/Mom"},i={0:"Listen on talk",1:"Listen on talk ignore",2:"Islate ignore",3:"Fixed"},s={0:"Normal",1:"No reply",2:"Reply direct",3:"Auto reply",4:"Auto talk",5:"Solo talk",6:"GPIO control",7:"Flex list"},o={0:"Disabled",1:"Receive only",2:"Send only",3:"Send/Receive"},d=["Name","configId","MulticastAddress","savedAtTimestamp","binaryTimestamp"],c={INVALID_FILE:"Invalid configuration file structure",INVALID_DATE:"Invalid date",FILE_READ_ERROR:"Error reading file",UNKNOWN_DEVICE_TYPE:"Unknown Device Type",UNKNOWN_USER:"Unknown User",UNKNOWN_GROUP:"Unknown Group"}},1567:(e,r,t)=>{"use strict";t.d(r,{G:()=>i,cn:()=>n});var a=t(3463),l=t(9795);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,l.QP)((0,a.$)(r))}let i=e=>{if(!e||!/^\d{1,2}-\d{1,2}-\d{4} \d{2}:\d{2}:\d{2}$/.test(e))return!1;let[r,t]=e.split(" "),[a,l,n]=r.split("-").map(Number),[i,s,o]=t.split(":").map(Number);return l>=1&&l<=12&&a>=1&&a<=31&&n>=1970&&i>=0&&i<=23&&s>=0&&s<=59&&o>=0&&o<=59}},8966:(e,r,t)=>{"use strict";t.d(r,{KG:()=>s,me:()=>o});var a=t(1567),l=t(3952);let n=e=>l.Xr[e]||l.UU.UNKNOWN_DEVICE_TYPE,i=e=>{try{let[r,t]=e.split(" "),[a,n,i]=r.split("-"),[s,o,d]=t.split(":"),c=new Date(parseInt(i),parseInt(n)-1,parseInt(a),parseInt(s),parseInt(o),parseInt(d));if(isNaN(c.getTime()))return console.error("Invalid date created from:",e),l.UU.INVALID_DATE;return c.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")}catch(r){return console.error("Error formatting date:",r,"Input:",e),l.UU.INVALID_DATE}},s=e=>({[-1]:"Low",0:"Normal",1:"High"})[e]||"Normal";function o(e){try{var r,t,n,s,o,c,g,v,h,b,x,N,k,y;let D=JSON.parse(e),I=l.eQ.filter(e=>{var r;return!(null===(r=D.Settings)||void 0===r?void 0:r[e])});if(I.length>0)throw console.error("Missing required fields:",I),Error("Invalid configuration file structure");let w=(null===(r=D.Settings)||void 0===r?void 0:r.savedAtTimestamp)||"",j=(null===(t=D.Settings)||void 0===t?void 0:t.binaryTimestamp)||"";(0,a.G)(w)||console.warn("Invalid savedAtTimestamp format:",w),(0,a.G)(j)||console.warn("Invalid binaryTimestamp format:",j);let S={"Configuration Name":(null===(n=D.Settings)||void 0===n?void 0:n.Name)||"Unknown","Configuration ID":(null===(s=D.Settings)||void 0===s?void 0:s.configId)||"Unknown","Multicast Address":(null===(o=D.Settings)||void 0===o?void 0:o.MulticastAddress)||"Unknown","Config Timestamp":i(w||"Invalid Date"),"Binary Timestamp":i(j||"Invalid Date"),"Unassigned Devices":0,state:{newBinary:null!==(g=null===(c=D.State)||void 0===c?void 0:c.newBinary)&&void 0!==g?g:0}},C=d(null!==(v=D.Groups)&&void 0!==v?v:{}),E=m(null!==(h=D.Users)&&void 0!==h?h:{},C),A=u(null!==(b=D.Devices)&&void 0!==b?b:{}),T=p(null!==(x=D.Devices)&&void 0!==x?x:{},null!==(N=D.Network)&&void 0!==N?N:{},A),U=f(null!==(k=D.WirelessClients)&&void 0!==k?k:{},A,null!==(y=D.UsbDevices)&&void 0!==y?y:{}),P=[...T,...U];return S["Unassigned Devices"]=P.filter(e=>null===e.linkedToUser).length,{configInfo:S,users:E,devices:P}}catch(r){if(console.error("Error parsing config file:",r),console.error("File content preview:",e.substring(0,200)+"..."),r instanceof Error)throw Error("Failed to parse config file: ".concat(r.message));throw Error("Failed to parse config file")}}let d=e=>{let r=new Map;return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).forEach(e=>{var t;let[a,l]=e;r.set(a,{id:a,name:l.Name,color:(null===(t=l.Color)||void 0===t?void 0:t.toString())||"0"})}),r},c=e=>{var r,t;if(e.DisplayName||(null===(r=e.SpecialChannels)||void 0===r?void 0:r.Program)||e.DeviceProfiles&&0!==Object.keys(e.DeviceProfiles).length||(null===(t=e.Settings)||void 0===t?void 0:t.Isolate)||e.FlexList&&0!==e.FlexList.length)return{DisplayName:e.DisplayName,SpecialChannels:e.SpecialChannels&&{Program:e.SpecialChannels.Program},...e.DeviceProfiles&&Object.keys(e.DeviceProfiles).length>0&&{DeviceProfiles:e.DeviceProfiles},...e.Settings&&{Settings:e.Settings},...e.FlexList&&e.FlexList.length>0&&{FlexList:e.FlexList}}},m=(e,r)=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(t=>{let[a,l]=t,n=[];return l.Channels&&Object.entries(l.Channels).filter(e=>{let[r]=e;return"keys"!==r}).forEach(t=>{let[a,l]=t,i=l.Assign;if(i&&i.Type&&i.Id){var s,o,d,c;let t=i.Id.toString(),m=1===i.Type,u=m?(null===(s=e[t])||void 0===s?void 0:s.Name)||"Unknown User":(null===(o=r.get(t))||void 0===o?void 0:o.name)||"Unknown Group";n.push({type:m?"user":"group",id:t,name:u,channelNumber:parseInt(a),talkMode:l.TalkMode,listenMode:l.ListenMode,channelMode:l.ChannelMode,isListening:1===l.Listen,volume:null!==(c=null===(d=l.Level)||void 0===d?void 0:d.Value)&&void 0!==c?c:0,talkState:l.talkState,callMode:l.CallMode,priority:l.Priority})}}),{id:a,name:l.Name,color:l.Color,devices:[],channelAssignments:n.length>0?n:void 0,details:c(l)}}),u=e=>{let r={};return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).forEach(e=>{let[t,a]=e;a.UserId&&1===a.UserId.Type&&(r[t]=a.UserId.Id.toString(),r[t.slice(-6)]=a.UserId.Id.toString())}),r},p=(e,r,t)=>{let a=new Map;return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).forEach(e=>{let[,r]=e;r.macAddress&&a.set(r.macAddress,r.syncStatus)}),Object.entries(r).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{var r;let[l,i]=e,s=l.split("-").slice(-3).join("").toUpperCase();return{name:i.Name,deviceType:i.deviceType,typeName:n(i.deviceType),serialNumber:i.serialNumber,firmware:i.firmwareName,ipAddress:i.IpAddress,macAddress:i.macAddress,linkedToUser:t[s]||null,syncStatus:null!==(r=a.get(i.macAddress))&&void 0!==r?r:0}})},g=e=>{let r=new Map;return(null==e?void 0:e.keys)&&Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r}).forEach(e=>{let[,t]=e;t.deviceId&&t.serialNumber&&r.set(t.deviceId,{serialNumber:t.serialNumber.toString(),firmware:t.firmwareName||l.so})}),r},f=(e,r,t)=>{if(!(null==e?void 0:e.keys))return[];let a=g(t);return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r}).map(e=>{var t,i;let[s,o]=e;if(!o.Name||!o.deviceType)return console.warn("Skipping wireless device ".concat(s," due to missing required data")),null;let d=a.get(s);return{name:o.Name,deviceType:o.deviceType,typeName:n(o.deviceType),serialNumber:(null==d?void 0:d.serialNumber)||l.so,firmware:(null==d?void 0:d.firmware)||l.so,ipAddress:l.so,macAddress:null!==(i=null===(t=o.poolData)||void 0===t?void 0:t.rfId)&&void 0!==i?i:s,linkedToUser:r[s]||null}}).filter(e=>null!==e)}}},e=>{var r=r=>e(e.s=r);e.O(0,[102,441,517,358],()=>r(1366)),_N_E=e.O()}]);
//# sourceMappingURL=page-b03d05186a59d471.js.map