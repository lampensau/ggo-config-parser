(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1366:(e,r,t)=>{Promise.resolve().then(t.bind(t,2223))},2223:(e,r,t)=>{"use strict";t.d(r,{default:()=>M});var a=t(5155),l=t(2115),i=t(7113);let n={258:"BPX Belt Pack",259:"BPXSP Sports Belt Pack",321:"WBPX Wireless Belt Pack",322:"WBPXSP Wireless Sports Belt Pack",325:"WBPRVCBRS Wireless Belt Pack",326:"WBPRVCBRSSP Wireless Sports Belt Pack",384:"Wallpanels Group",385:"WPSP Wallpanel",386:"WPHS Wallpanel",387:"WPNA Wallpanel",388:"WPX Wallpanel",513:"MCD08 Desk Station",514:"MCR12 Desk Station",515:"MCD16 Desk Station",516:"MCD24 Desk Station",517:"MCD32 Desk Station",518:"MCX Rack Station",519:"MCXEXT Rack Channel Extension",520:"MCXD Desk Station",521:"MCXDEXT Desk Channel Extension",769:"4W Interface",770:"2W Interface",771:"BRIDGE Interface",772:"INTERFACEX (LCD)",773:"INTERFACEX (TFT)",774:"BRIDGEX Interface (LCD)",775:"BRIDGEX Interface (TFT)",776:"Q4WR Interface",777:"DANTE Interface",897:"BCN Beacon",898:"WAA Antenna",899:"SiRDX Interface",900:"Si4WR Interface",901:"Si2WR Interface",902:"SiBR8RV Interface"},s=e=>n[e]||"Unknown Device Type",d=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(",","")}catch(r){return console.error("Error formatting date:",r),e}},o=["Name","configId","MulticastAddress","savedAtTimestamp","binaryTimestamp"],c=e=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{let[r,t]=e;return{id:r,name:t.Name,color:t.Color,devices:[]}}),m=e=>{let r={};return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).forEach(e=>{let[t,a]=e;a.UserId&&1===a.UserId.Type&&(r[t]=a.UserId.Id.toString(),r[t.slice(-6)]=a.UserId.Id.toString())}),r},u=(e,r)=>Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r&&"badge"!==r}).map(e=>{let[t,a]=e,l=t.split("-").slice(-3).join("").toUpperCase();return{name:a.Name,deviceType:a.deviceType,typeName:s(a.deviceType),serialNumber:a.serialNumber,firmware:a.firmwareName,ipAddress:a.IpAddress,macAddress:a.macAddress,linkedToUser:r[l]||null}}),f=e=>{let r=new Map;return(null==e?void 0:e.keys)&&Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r}).forEach(e=>{let[,t]=e;t.deviceId&&t.serialNumber&&r.set(t.deviceId,{serialNumber:t.serialNumber.toString(),firmware:t.firmwareName||"-"})}),r},g=(e,r,t)=>{if(!(null==e?void 0:e.keys))return[];let a=f(t);return Object.entries(e).filter(e=>{let[r]=e;return"keys"!==r}).map(e=>{var t,l;let[i,n]=e;if(!n.Name||!n.deviceType)return console.warn("Skipping wireless device ".concat(i," due to missing required data")),null;let d=a.get(i);return{name:n.Name,deviceType:n.deviceType,typeName:s(n.deviceType),serialNumber:(null==d?void 0:d.serialNumber)||"-",firmware:(null==d?void 0:d.firmware)||"-",ipAddress:"-",macAddress:null!==(l=null===(t=n.poolData)||void 0===t?void 0:t.rfId)&&void 0!==l?l:i,linkedToUser:r[i]||null}}).filter(e=>null!==e)};var p=t(6535),h=t(7987),v=t(8482),x=t(4352),b=t(6694),k=t(7644),N=t(1567);let y=k.Kq,j=k.bL,w=k.l9,C=l.forwardRef((e,r)=>{let{className:t,sideOffset:l=4,...i}=e;return(0,a.jsx)(k.UC,{ref:r,sideOffset:l,className:(0,N.cn)("z-50 overflow-hidden rounded-md bg-gray-900 px-3 py-1.5 text-xs text-gray-50 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});C.displayName=k.UC.displayName;var D=t(5565);let S=()=>"/ggo-config-parser",E=e=>{let{parsedData:r,onExport:t,onReset:l,theme:i,onThemeChange:n,mounted:s}=e,d=()=>s?"dark"===i?"Switch to light mode":"light"===i?"Switch to system theme":"Switch to dark mode":"Loading theme...";return(0,a.jsx)("div",{className:"sticky top-0 z-10 bg-emerald-600 dark:bg-emerald-800 shadow-md",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(D.default,{src:"".concat(S(),"/logo-plain.svg"),alt:"Green-GO Logo",width:32,height:32,className:"mr-2 brightness-0 invert"}),(0,a.jsx)("h1",{className:"text-white text-xl font-semibold",children:"Green-GO Config Parser"})]}),(0,a.jsx)(y,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",role:"toolbar","aria-label":"Main controls",children:[r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j,{children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-white dark:bg-gray-200 text-emerald-700 rounded-md hover:bg-emerald-50 dark:hover:bg-gray-300 transition-colors duration-200",onClick:t,"aria-label":"Export to CSV",children:(0,a.jsx)(x.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,a.jsx)(C,{children:"Export to CSV"})]}),(0,a.jsxs)(j,{children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:l,"aria-label":"Parse another file",children:(0,a.jsx)(b.A,{className:"w-5 h-5","aria-hidden":"true"})})}),(0,a.jsx)(C,{children:"Parse another file"})]})]}),(0,a.jsxs)(j,{children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsx)("button",{className:"p-2 bg-emerald-700 dark:bg-emerald-900 text-white rounded-md hover:bg-emerald-800 dark:hover:bg-emerald-950 transition-colors duration-200",onClick:n,"aria-label":d(),title:d(),children:s?"dark"===i?(0,a.jsx)(p.A,{className:"w-5 h-5"}):"light"===i?(0,a.jsx)(h.A,{className:"w-5 h-5"}):(0,a.jsx)(v.A,{className:"w-5 h-5"}):null})}),(0,a.jsx)(C,{children:d()})]})]})})]})})};var I=t(5942),T=t(9749);let A=e=>{let{isDragging:r,error:t,onDrop:l,onDragOver:i,onDragLeave:n,isLoading:s=!1}=e;return(0,a.jsx)(T.Zp,{className:"border-2 border-dashed",children:(0,a.jsx)(T.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"rounded-lg p-8 text-center cursor-pointer transition-colors duration-200\n            ".concat(s?"opacity-50 pointer-events-none":"","\n            ").concat(r?"bg-emerald-50 dark:bg-emerald-950/50 border-emerald-500":"bg-white dark:bg-gray-800 hover:bg-emerald-50 dark:hover:bg-emerald-950/30","\n            ").concat(t?"border-red-500 bg-red-50 dark:bg-red-950/50":""),onDrop:l,onDragOver:i,onDragLeave:n,onClick:()=>{var e;return null===(e=document.getElementById("file-input"))||void 0===e?void 0:e.click()},role:"button",tabIndex:0,"aria-label":"Drop zone for configuration file",onKeyPress:e=>{if("Enter"===e.key||" "===e.key){var r;null===(r=document.getElementById("file-input"))||void 0===r||r.click()}},children:[s?(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-emerald-500 border-t-transparent mx-auto"}):(0,a.jsx)("input",{type:"file",id:"file-input",className:"sr-only",accept:".gg5",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new DataTransfer;e.items.add(t),l({preventDefault:()=>{},dataTransfer:{files:e.files}})}},"aria-label":"Upload configuration file"}),(0,a.jsx)(I.A,{className:"w-16 h-16 mx-auto mb-4 text-emerald-600 dark:text-emerald-400","aria-hidden":"true"}),(0,a.jsx)("p",{className:"text-lg mb-2 font-medium text-gray-700 dark:text-gray-200",children:"Drag and drop your configuration file here"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(Only supports Green-GO ",(0,a.jsx)("code",{children:".gg5"})," configuration files)"]}),t&&(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400 mt-4",role:"alert",children:t})]})})})};var R=t(7711);class P extends l.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Error caught by boundary:",e),console.error("Error info:",r)}render(){if(this.state.hasError){var e,r;return(0,a.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900 text-red-900 dark:text-red-50 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-sm",children:null===(e=this.state.error)||void 0===e?void 0:e.message}),(0,a.jsx)("pre",{className:"mt-2 text-xs overflow-auto",children:null===(r=this.state.error)||void 0===r?void 0:r.stack})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let W=(0,R.default)(()=>t.e(681).then(t.bind(t,6681)).then(e=>e.ConfigDetails),{loadableGenerated:{webpack:()=>[6681]}}),U=(0,R.default)(()=>t.e(247).then(t.bind(t,5247)).then(e=>e.UserDevices),{loadableGenerated:{webpack:()=>[5247]}}),B=(0,R.default)(()=>t.e(139).then(t.bind(t,139)).then(e=>e.UnassignedDevices),{loadableGenerated:{webpack:()=>[139]}}),M=()=>{let[e,r]=(0,l.useState)(null),[t,n]=(0,l.useState)(null),[s,f]=(0,l.useState)(!1),[p,h]=(0,l.useState)(null),{theme:v,setTheme:x}=(0,i.D)(),[b,k]=(0,l.useState)(!1),[N,y]=(0,l.useState)(!1),j=(0,l.useCallback)(e=>{e.preventDefault(),f(!1),n(null),y(!0);let t=e.dataTransfer.files[0];if(!t){y(!1);return}if(console.log("File being processed:",{name:t.name,size:t.size,type:t.type}),!t.name.endsWith(".gg5")){n("Please upload a Green-GO .gg5 configuration file"),y(!1);return}h(t.name);let a=new FileReader;a.onload=e=>{try{var t,a,l;console.log("File content length:",null===(a=e.target)||void 0===a?void 0:null===(t=a.result)||void 0===t?void 0:t.toString().length);let i=function(e){try{var r,t,a,l,i,n,s,f,p,h,v,x,b,k,N;let y=JSON.parse(e),j=o.filter(e=>{var r;return!(null===(r=y.Settings)||void 0===r?void 0:r[e])});if(j.length>0)throw console.error("Missing required fields:",j),Error("Invalid configuration file structure");let w={"Configuration Name":null!==(n=null===(r=y.Settings)||void 0===r?void 0:r.Name)&&void 0!==n?n:"Unknown","Configuration ID":(null!==(s=null===(t=y.Settings)||void 0===t?void 0:t.configId)&&void 0!==s?s:"").substring(0,8),"Multicast Address":null!==(f=null===(a=y.Settings)||void 0===a?void 0:a.MulticastAddress)&&void 0!==f?f:"","Config Timestamp":d(null!==(p=null===(l=y.Settings)||void 0===l?void 0:l.savedAtTimestamp)&&void 0!==p?p:""),"Binary Timestamp":d(null!==(h=null===(i=y.Settings)||void 0===i?void 0:i.binaryTimestamp)&&void 0!==h?h:""),"Unassigned Devices":0},C=c(null!==(v=y.Users)&&void 0!==v?v:{}),D=m(null!==(x=y.Devices)&&void 0!==x?x:{}),S=u(null!==(b=y.Network)&&void 0!==b?b:{},D),E=g(null!==(k=y.WirelessClients)&&void 0!==k?k:{},D,null!==(N=y.UsbDevices)&&void 0!==N?N:{}),I=[...S,...E];return w["Unassigned Devices"]=I.filter(e=>null===e.linkedToUser).length,{configInfo:w,users:C,devices:I}}catch(r){if(console.error("Error parsing config file:",r),console.error("File content preview:",e.substring(0,200)+"..."),r instanceof Error)throw Error("Failed to parse config file: ".concat(r.message));throw Error("Failed to parse config file")}}(null===(l=e.target)||void 0===l?void 0:l.result);r(i)}catch(e){console.error("Error in file processing:",e),n(e instanceof Error?e.message:"Failed to parse file")}finally{y(!1)}},a.onerror=e=>{console.error("FileReader error:",e),n("Error reading file"),y(!1)},a.readAsText(t)},[]),w=(0,l.useCallback)(e=>{e.preventDefault(),f(!0)},[]),C=(0,l.useCallback)(e=>{e.preventDefault(),f(!1)},[]),D=(0,l.useCallback)(()=>{if(!e)return;let r=p?p.replace(/\.(gg5|json)$/,".csv"):"config_export.csv",t=new Blob([["User Name,User ID,Device Name,Device Type,Serial Number,Firmware,IP Address,MAC Address",...e.users.flatMap(r=>{let t=e.devices.filter(e=>e.linkedToUser===r.id);return t.length>0?t.map(e=>[r.name,r.id,e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(",")):[[r.name,r.id,"","","","","",""].map(e=>'"'.concat(e||"",'"')).join(",")]}),...e.devices.filter(e=>null===e.linkedToUser).map(e=>["","",e.name,e.typeName,e.serialNumber,e.firmware,e.ipAddress,e.macAddress].map(e=>'"'.concat(e||"",'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(t);a.setAttribute("href",l),a.setAttribute("download",r),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},[e,p]);return(0,l.useEffect)(()=>{k(!0)},[]),(0,a.jsxs)("div",{className:"min-h-full",role:"main",children:[(0,a.jsx)(E,{parsedData:e,onExport:D,onReset:()=>{r(null),n(null)},theme:v,onThemeChange:()=>{"dark"===v?x("light"):"light"===v?x("system"):x("dark")},mounted:b}),(0,a.jsx)(P,{children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(W,{configInfo:e.configInfo}),e.users.map(r=>(0,a.jsx)(U,{user:r,devices:e.devices},r.id)),(0,a.jsx)(B,{devices:e.devices})]}):(0,a.jsx)(A,{isDragging:s,error:t,onDrop:j,onDragOver:w,onDragLeave:C,isLoading:N})})})]})}},9749:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>o,ZB:()=>d,Zp:()=>n,aR:()=>s});var a=t(5155),l=t(2115),i=t(1567);let n=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...l})});n.displayName="Card";let s=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...l})});s.displayName="CardHeader";let d=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...l})});d.displayName="CardTitle";let o=l.forwardRef((e,r)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...l})});o.displayName="CardContent"},1567:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var a=t(3463),l=t(9795);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,l.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[102,441,517,358],()=>r(1366)),_N_E=e.O()}]);
//# sourceMappingURL=page-e1458bb71e68aa46.js.map